sfmmasterrabbit:
    image: rabbitmq@sha256:397382d2b222f3a298a6c74e93f348fb16f9a7fde2c02ba14122624d852daae3
    #RabbatMQ 3-management
    ports:
        - "15672:15672"
    restart: always
    environment:
        - RABBITMQ_DEFAULT_USER=sfm_user
    env_file:
        - ./secrets.env
sfmmasterdb:
    image: gwul/sfm-ui-db:master
    env_file:
        - ./secrets.env
    restart: always
sfmmasterapp:
    image: gwul/sfm-ui:master
    ports:
        - "80:80"
    links:
        - sfmmasterdb:db
        - sfmmasterrabbit:mq
    environment:
        - SFM_DEBUG=True
        - SFM_SITE_ADMIN_EMAIL=nowhere@example.com
    restart: always
    volumes_from:
        - sfmmasterdata
sfmmasterflickrharvester:
    image: gwul/sfm-flickr-harvester:master
    links:
        - sfmmasterrabbit:mq
    restart: always
    environment:
        - DEBUG=True
    volumes_from:
        - sfmmasterdata
sfmmastertwitterrestharvester:
    image: gwul/sfm-twitter-rest-harvester:master
    links:
        - sfmmasterrabbit:mq
    restart: always
    environment:
        - DEBUG=True
    volumes_from:
        - sfmmasterdata
sfmmastertwitterstreamharvester:
    image: gwul/sfm-twitter-stream-harvester:master
    links:
        - sfmmasterrabbit:mq
    restart: always
    environment:
        - DEBUG=True
    volumes_from:
        - sfmmasterdata
sfmmasterdata:
    image: ubuntu:14.04
    command: /bin/true
    volumes:
         - /sfm-data